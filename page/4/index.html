<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.isroots.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="记录一些自己的见闻">
<meta property="og:type" content="website">
<meta property="og:title" content="吴晓宁blog">
<meta property="og:url" content="https://blog.isroots.com/page/4/index.html">
<meta property="og:site_name" content="吴晓宁blog">
<meta property="og:description" content="记录一些自己的见闻">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="吴晓宁">
<meta property="article:tag" content="blog,编程">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.isroots.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>吴晓宁blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">吴晓宁blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">吴晓宁blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/10/14/C++%20%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/10/14/C++%20%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">C++ 回调函数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-10-14 13:31:00" itemprop="dateCreated datePublished" datetime="242024-10-14T13:31:00+08:00">242024-10-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-14 13:31:54" itemprop="dateModified" datetime="2024-10-14T13:31:54+08:00">2024-10-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="1-回调函数的理解"><a href="#1-回调函数的理解" class="headerlink" title="1.回调函数的理解"></a>1.回调函数的理解</h1><p>回调函数是通过函数指针的方式调用函数（<a target="_blank" rel="noopener" href="http://isroot.cn/c/hanshuzhizhenhezhizhenhanshu/" title="关于函数指针的理解">关于函数指针的理解</a>）:把函数的指针(地址)作为参数传递给另一个函数，当这个指针被用来调用其所指向的函数的时，这个函数就被称为是回调函数。回调函数不是由函数的实现方直接调用，而是在特定的时间或者条件发生是由另外一方调用的，用于对该事件或条件进行相应。<br>我们可以简单理解为当一个函数的参数是另一个函数的**<em>指针</em>**时，这个函数我们成为回调函数</p>
<h1 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QtCore/QCoreApplication&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;QDebug&gt;</span><br><span class="line"></span><br><span class="line">typedef void(*fun)(int); //定义一个函数指针</span><br><span class="line"></span><br><span class="line">fun p = NULL;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void caller(fun pCallBack)</span><br><span class="line">&#123;</span><br><span class="line">    p = pCallBack;</span><br><span class="line">    int result = 1;</span><br><span class="line">    return (*p)(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void callBack(int a)//回调函数</span><br><span class="line">&#123;</span><br><span class="line">    qDebug ()&lt;&lt;&quot;a value is &quot;&lt;&lt;a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    QCoreApplication a(argc, argv);</span><br><span class="line"></span><br><span class="line">    caller (callBack);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return a.exec();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意： <strong>如果试图直接使用C++的成员函数作为回调函数将发生错误，甚至编译就不能通过。其错误是普通的C++成员函数都隐含了一个传递函数作为参数，亦即“this”指针，C++通过传递this指针给其成员函数从而实现程序函数可以访问C++的数据成员。这也可以理解为什么C++类的多个实例可以共享成员函数却-有不同的数据成员</strong>。<br>如果在类中我们可以将回调函数声明成static 静态成员函数 或者将回调函数声明成全局的函数。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/10/14/Qt%20%E9%94%AE%E7%9B%98%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/10/14/Qt%20%E9%94%AE%E7%9B%98%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Qt 键盘的设计和使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-10-14 13:20:00" itemprop="dateCreated datePublished" datetime="242024-10-14T13:20:00+08:00">242024-10-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-14 13:20:35" itemprop="dateModified" datetime="2024-10-14T13:20:35+08:00">2024-10-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Qt-键盘的设计和使用"><a href="#Qt-键盘的设计和使用" class="headerlink" title="Qt 键盘的设计和使用"></a>Qt 键盘的设计和使用</h1><h2 id="使用界面"><a href="#使用界面" class="headerlink" title="使用界面"></a>使用界面</h2><ul>
<li>1.数字键盘<br>  <img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif" alt="数字键盘" title="数字键盘"></li>
<li>2.拼音键盘<br>  <img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif" alt="拼音键盘" title="拼音键盘"></li>
</ul>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>在arm平台有时候需要用户需要数据，因为arm平台没有外接键盘设计，需要设计虚拟键盘来实现功能，当用户点击界面输入控件（比如QLineEdit，QtextEdit 等）的时候自动弹出虚拟键盘，实现用户输入功能。</p>
<h2 id="实现机制"><a href="#实现机制" class="headerlink" title="实现机制"></a>实现机制</h2><p>使用Qt的事件机制来实现，当发生鼠标点击事件的时候，判断当前光标所在的object的属性值，如果是已经注册属性值，将会调出输入键盘，同时获取当前object的内容，并且将当前光标焦点保存下来，当关闭键盘的时候，将键盘中输入的内容拷贝到object的输入框中。<br>整个代码使用简单，与应用程序的耦合度小，可交叉编译使用在嵌入式平台。如果使用放有自己的定制键盘放到键盘管理工厂类中来时间调用。</p>
<h2 id="主要代码讲解"><a href="#主要代码讲解" class="headerlink" title="主要代码讲解"></a>主要代码讲解</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">//键盘工厂类，负责调用键盘和增加键盘</span><br><span class="line">keyBoardFactory.cpp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//这里可以增加使用方自定义的键盘</span><br><span class="line">void KeyboardFactory::init()</span><br><span class="line">&#123;</span><br><span class="line">    //添加两种使用键盘</span><br><span class="line">    DigitalBoard *board = new DigitalBoard;</span><br><span class="line">    hzKB* hzkeyBoard  = new hzKB;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    addKeyboard(&quot;DigitalBoard&quot;, board);</span><br><span class="line">    addKeyboard(&quot;pingyin&quot;,hzkeyBoard);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void KeyboardFactory::addKeyboard(const QString &amp;name, IKeyboard *kb)</span><br><span class="line">&#123;</span><br><span class="line">    auto it = m_keyboards.find(name);</span><br><span class="line">    if (it != m_keyboards.end())</span><br><span class="line">    &#123;</span><br><span class="line">        if (it.value() != NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            delete it.value();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    m_keyboards[name] = kb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//鼠标单击事件</span><br><span class="line">bool KeyboardFactory::eventFilter(QObject *obj, QEvent *event)</span><br><span class="line">&#123;</span><br><span class="line">    if (event-&gt;type() == QEvent::MouseButtonPress)</span><br><span class="line">    &#123;</span><br><span class="line">        if(qApp-&gt;focusWidget() != NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            //获取焦点的属性值</span><br><span class="line">            QString kbType = qApp-&gt;focusWidget()-&gt;property (&quot;Keyboard&quot;).toByteArray();</span><br><span class="line">            QString regExp = qApp-&gt;focusWidget()-&gt;property(&quot;setRegExp&quot;).toByteArray();</span><br><span class="line">            if (!kbType.isEmpty())</span><br><span class="line">            &#123;</span><br><span class="line">                //根据焦点属性值去查找键盘</span><br><span class="line">                auto it = m_keyboards.find(kbType);</span><br><span class="line"></span><br><span class="line">                if (it != m_keyboards.end())</span><br><span class="line">                &#123;</span><br><span class="line">                    it.value()-&gt;setRegExp(regExp);</span><br><span class="line">                    it.value()-&gt;setCurrentFocus(qApp-&gt;focusWidget());</span><br><span class="line">                    it.value()-&gt;focusChanged();</span><br><span class="line">                    it.value()-&gt;showBoard();</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return QObject::eventFilter(obj, event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">class IKeyboard</span><br><span class="line">//工厂类</span><br><span class="line"></span><br><span class="line">    class IKeyboard</span><br><span class="line">            :public QWidget</span><br><span class="line">    &#123;</span><br><span class="line">        Q_OBJECT</span><br><span class="line"></span><br><span class="line">    public:</span><br><span class="line">        IKeyboard(QWidget* parent=0, Qt::WindowFlags f=Qt::WindowFlags());</span><br><span class="line"></span><br><span class="line">    public:</span><br><span class="line">        //具体的键盘去实现数据更新</span><br><span class="line">        virtual void focusChanged() = 0;</span><br><span class="line">        virtual void showBoard();</span><br><span class="line">        virtual void hideBoard();</span><br><span class="line"></span><br><span class="line">    public:</span><br><span class="line">        void setOldFocus(QWidget *focus);</span><br><span class="line">        //当前鼠标的焦点</span><br><span class="line">        void setCurrentFocus(QWidget *focus);</span><br><span class="line">        //设置正则表达式</span><br><span class="line">        void setRegExp(const QString &amp;arg);</span><br><span class="line"></span><br><span class="line">    protected:</span><br><span class="line">        void mousePressEvent(QMouseEvent *e);</span><br><span class="line">        void mouseMoveEvent(QMouseEvent *e);</span><br><span class="line"></span><br><span class="line">    private:</span><br><span class="line">        void moveToScreenCenter();</span><br><span class="line"></span><br><span class="line">    protected:</span><br><span class="line">        QWidget *m_oldFocus;</span><br><span class="line">        QWidget *m_currentFocus;</span><br><span class="line">        QString regExp;</span><br><span class="line">        QPoint m_currentPosition;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>

<p>以下代码是具体的使用，在使用的时候我们需要对每个输入的控件进行属性设置，包括正则表达式的设置，这样，我们在使用的时候，才能正确的加载我们需要的键盘。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mainwindow.cpp</span><br><span class="line">void MainWindow::init()</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;Text_numEdit-&gt;setProperty(keyboardKye,numKeyboardValue);</span><br><span class="line"></span><br><span class="line">    ui-&gt;line_numEdit-&gt;setProperty (keyboardKye,numKeyboardValue);</span><br><span class="line">    //设置正则表达式，控制具体使用</span><br><span class="line">    ui-&gt;line_numEdit-&gt;setProperty (setRegExp,&quot;(\d)(\.\d&#123;1,4&#125;)?&quot;);</span><br><span class="line">    //调用中文输入键盘</span><br><span class="line">    ui-&gt;Text_pinyinEdit-&gt;setProperty (keyboardKye,PINYIN);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main.cpp</span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    QApplication a(argc, argv);</span><br><span class="line"></span><br><span class="line">    QTextCodec::setCodecForTr(QTextCodec::codecForName(&quot;GB2312&quot;));</span><br><span class="line">    Nut::KeyboardFactory key;</span><br><span class="line"></span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.show();</span><br><span class="line"></span><br><span class="line">    Nut::KeyboardFactory key;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="UML类图"><a href="#UML类图" class="headerlink" title="UML类图"></a>UML类图</h2><p><img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif" alt="UML类图" title="UML类图"></p>
<h2 id="github地址"><a href="#github地址" class="headerlink" title="github地址"></a>github地址</h2><p><a target="_blank" rel="noopener" href="https://github.com/Lovening/virtualKeyBoard/tree/master" title="源码地址">源码地址</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/09/03/Makefile%20%E4%BC%AA%E7%9B%AE%E6%A0%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/09/03/Makefile%20%E4%BC%AA%E7%9B%AE%E6%A0%87/" class="post-title-link" itemprop="url">Makefile 伪目标</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-09-03 20:06:00" itemprop="dateCreated datePublished" datetime="242024-09-03T20:06:00+08:00">242024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-03 20:06:37" itemprop="dateModified" datetime="2024-09-03T20:06:37+08:00">2024-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="makefile中的目标含义"><a href="#makefile中的目标含义" class="headerlink" title="makefile中的目标含义"></a>makefile中的目标含义</h2><ul>
<li>通过.PHONY关键字声明一个伪目标</li>
<li>伪目标不对应任何实际的文件</li>
<li>不管伪目标的依赖是否更新，命令总是执行</li>
<li>伪目标的语法：先声明，后使用</li>
</ul>
<p><strong>伪目标是这样一个目标</strong>：它不代表一个真正的文件名，在执行make时可以指定这个目标来执行其所在规则定义的命令，有时我们也可以将一个伪目标称为标签。使用伪目标有两点原因：</p>
<ol>
<li><p>避免在我们的Makefile中定义的只执行命令的的目标（此目标的目的为了执行执行一系列命令，而不需要创建这个目标）和工作目录下的实际文件出现名字冲突。</p>
</li>
<li><p>提高执行make时的效率，特别是对于一个大型的工程来说，编译的效率也许你同样关心。以下就这两个问题我们进行分析讨论：</p>
</li>
</ol>
<p>如果我们需要书写这样一个规则：规则所定义的命令不是去创建目标文件，而是使用make指定具体的目标来执一些特定的命令。像下边那样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clean: </span><br><span class="line">rm *.o temp </span><br></pre></td></tr></table></figure>

<p>规则中rm不是创建文件clean的命令，只是删除当前目录下的所有.o文件和temp文件。在工作目录下不存在clean这个文件时，我们输入make clean后，rm *.o temp总会被执行。这是我们的初衷。</p>
<p>但当前工作目录下存在文件clean时情况就不一样了，在我们输入make clean时。规则没有依赖文件，所以目标被认为是最新的而不去执行规则作定义的命令，命令rm将不会被执行。这并不是我们的初衷。为了避免这个问题，我们可以将目标clean明确的声明为伪目标。将一个目标声明为伪目标需要将它作为特殊目标.PHONY的依赖。如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.PHONY : clean </span><br></pre></td></tr></table></figure>

<p>这样目标clean就是一个伪目标，无论当前目录下是否存在clean这个文件。我们输入make clean之后。rm命令都会被执行。而且，当一个目标被声明为伪目标后，make在执行此规则时不会试图去查找隐含规则来创建这个目标。这样也提高了make的执行效率，同时我们也不用担心由于目标和文件名重名而使我们的期望失败。在书写伪目标规则时，首先需要声明目标是一个伪目标，之后才是伪目标的规则定义。目标clean书写格式应该如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.PHONY: clean </span><br><span class="line">clean: </span><br><span class="line">rm *.o temp </span><br></pre></td></tr></table></figure>

<p>伪目标的另外一使用场合在make的并行和递归执行过程中。此情况下一般存在一个变量，其定义为所有需要make的子目录。对多个目录进行make的实现方式可以在一个规则中可以使用shell的循环来完成。如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SUBDIRS = foo bar baz </span><br><span class="line">subdirs: </span><br><span class="line">for dir in $(SUBDIRS); do \ </span><br><span class="line">$(MAKE) -C $$dir; \ </span><br><span class="line">done </span><br></pre></td></tr></table></figure>

<p>但这种实现方法存在以下几个问题。</p>
<p>当子目录执行make出现错误时，make不会退出。就是说，在对某一个目录执行make失败以后，会继续对其他的目录进行make。在最终执行失败的情况下，我们很难根据错误的提示定位出具体是是那个目录下的Makefile出现错误。这给问题定位造成了很大的困难。为了避免这样的问题，我们可以在命令行部分加入错误的监测，在命令执行错误后make退出。不幸的是，如果在执行make时使用了-k选项，此方式将失效。</p>
<p>另外一个问题就是使用这种shell的循环方式时，没有用到make对目录的并行处理功能，因为规则的命令是一条完整的shell命令，不能被并行的执行。</p>
<p>我们可以通过伪目标方式来克服以上实现方式所存在的两个问题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SUBDIRS = foo bar baz </span><br><span class="line">.PHONY: subdirs $(SUBDIRS) </span><br><span class="line">subdirs: $(SUBDIRS) </span><br><span class="line">$(SUBDIRS): </span><br><span class="line">$(MAKE) -C $@ </span><br><span class="line">foo: baz </span><br></pre></td></tr></table></figure>

<p>上边的实现中使用了一个没有命令行的规则foo: baz，用来限制子目录的make顺序。此规则的含义时在处理foo目录之前，需要等待baz目录处理完成。在书写一个并行执行make的Makefile时，目录的处理顺序是需要特别注意的。</p>
<p>一般情况下，一个伪目标不作为一个另外一个目标文件的依赖。这是因为当一个目标文件的依赖包含伪目标时，每一次在执行这个规则时伪目标所定义的命令都会被执行（因为它是规则的依赖，重建规则目标文件时需要首先重建它的依赖）。当伪目标没有作为任何目标（此目标是一个可被创建或者已存在的文件）的依赖时，我们只能通过make的命令行选项明确指定这个伪目标，来执行它所定义的命令。例如我们的make clean。</p>
<p>Makefile中，伪目标可以有自己的依赖。在一个目录下如果需要创建多个可执行程序，我们可以将所有程序的重建规则在一个Makefile中描述。因为Makefile中第一个目标是终极目标，约定的做法是使用一个称为all的伪目标来作为终极目标，它的依赖文件就是那些需要创建的程序。下边就是一个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#sample Makefile </span><br><span class="line">all : prog1 prog2 prog3 </span><br><span class="line">.PHONY : all </span><br><span class="line">prog1 : prog1.o utils.o </span><br><span class="line">cc -o prog1 prog1.o utils.o </span><br><span class="line">prog2 : prog2.o </span><br><span class="line">cc -o prog2 prog2.o </span><br><span class="line">prog3 : prog3.o sort.o utils.o </span><br><span class="line">cc -o prog3 prog3.o sort.o utils.o </span><br></pre></td></tr></table></figure>

<p>执行make时，目标all被作为终极目标。为了完成对它的更新，make会创建（不存在）或者重建（已存在）目标all的所有依赖文件（prog1、prog2和prog3）。当需要单独更新某一个程序时，我们可以通过make的命令行选项来明确指定需要重建的程序。（例如： make prog1）。 当一个伪目标作为另外一个伪目标依赖时，make将其作为另外一个伪目标的子例程来处理（可以这样理解：其作为另外一个伪目标的必须执行的部分，就行C语言中的函数调用一样）。下边的例子就是这种用法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.PHONY: cleanall cleanobj cleandiff </span><br><span class="line">cleanall : cleanobj cleandiff </span><br><span class="line">rm program </span><br><span class="line">cleanobj : </span><br><span class="line">rm *.o </span><br><span class="line">cleandiff : </span><br><span class="line">rm *.diff</span><br></pre></td></tr></table></figure>

<p>cleanobj和cleandiff这两个伪目标有点像子程序的意思（执行目标clearall时会触发它们所定义的命令被执行）。我们可以输入make cleanall和make cleanobj和make cleandiff命令来达到清除不同种类文件的目的。例子首先通过特殊目标.PHONY声明了多个伪目标，它们之间使用空各分割，之后才是各个伪目标的规则定义。</p>
<p>说明：<br>通常在清除文件的伪目标所定义的命令中rm使用选项–f（–force）来防止在缺少删除文件时出错并退出，使make clean过程失败。也可以在rm之前加上-来防止rm错误退出，这种方式时make会提示错误信息但不会退出。为了不看到这些讨厌的信息，需要使用上述的第一种方式。<br>另外make存在一个内嵌隐含变量RM，它被定义为：RM &#x3D; rm –f。因此在书写clean规则的命令行时可以使用变量$(RM)来代替rm，这样可以免出现一些不必要的麻烦！这是我们推荐的用法。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/09/03/C++%20%E7%BB%A7%E6%89%BF%E6%8E%A2%E7%B4%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/09/03/C++%20%E7%BB%A7%E6%89%BF%E6%8E%A2%E7%B4%A2/" class="post-title-link" itemprop="url">C++ 继承探索</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-09-03 17:17:00" itemprop="dateCreated datePublished" datetime="242024-09-03T17:17:00+08:00">242024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-03 17:18:31" itemprop="dateModified" datetime="2024-09-03T17:18:31+08:00">2024-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>C++ 继承是C++的一个重要概念，以前一直以为自己对继承概念理解了，今天做了一个C++继承的题，才发现自己知识点的盲区，现在先上题，有兴趣的可以做下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">main.cpp</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtCore/QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">	<span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> m_data;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>(<span class="type">int</span> data = <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_data= data;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">GetData</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">doGetData</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">int</span> <span class="title">doGetData</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> m_data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    int doGetData()</span></span><br><span class="line"><span class="comment">//    &#123;</span></span><br><span class="line"><span class="comment">//        //qDebug ()&lt;&lt;&quot;virtual data is &quot;&lt;&lt;m_data;</span></span><br><span class="line"><span class="comment">//        return m_data;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>:<span class="keyword">public</span> A&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> m_data;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">B</span>(<span class="type">int</span> data = <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_data= data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">GetData</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">doGetData</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>:<span class="keyword">public</span> B&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> m_data;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">C</span>(<span class="type">int</span> data = <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        m_data = data;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    <span class="function">C <span class="title">c</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">    <span class="built_in">qDebug</span> ()&lt;&lt;<span class="string">&quot;c.GetData is &quot;</span>&lt;&lt;c.<span class="built_in">GetData</span> ();</span><br><span class="line">    <span class="built_in">qDebug</span> ()&lt;&lt;<span class="string">&quot;c.A::GetData is &quot;</span>&lt;&lt;c.A::<span class="built_in">GetData</span> ();</span><br><span class="line">    <span class="built_in">qDebug</span> ()&lt;&lt;<span class="string">&quot;c.B::GetData is &quot;</span>&lt;&lt;c.B::<span class="built_in">GetData</span> ();</span><br><span class="line">    <span class="built_in">qDebug</span> ()&lt;&lt;<span class="string">&quot;c.C::GetData is &quot;</span>&lt;&lt;c.C::<span class="built_in">GetData</span> ();</span><br><span class="line">    <span class="built_in">qDebug</span> ()&lt;&lt;<span class="string">&quot;c.doGetData is &quot;</span>&lt;&lt;c.<span class="built_in">doGetData</span> ();</span><br><span class="line">    <span class="built_in">qDebug</span> ()&lt;&lt;<span class="string">&quot;c.A::doGetData is &quot;</span>&lt;&lt;c.A::<span class="built_in">doGetData</span> ();</span><br><span class="line">    <span class="built_in">qDebug</span> ()&lt;&lt;<span class="string">&quot;c.B::doGetData is &quot;</span>&lt;&lt;c.B::<span class="built_in">doGetData</span> ();</span><br><span class="line">    <span class="built_in">qDebug</span> ()&lt;&lt;<span class="string">&quot;c.C::doGetData is &quot;</span>&lt;&lt;c.C::<span class="built_in">doGetData</span> ();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>写出main 函数里面qDebug中打印的值，各位不妨先思考下再看答案<br>答案是:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">c.GetData is  1 </span><br><span class="line">c.A::GetData is  1 </span><br><span class="line">c.B::GetData is  1 </span><br><span class="line">c.C::GetData is  1 </span><br><span class="line">c.doGetData is  1 </span><br><span class="line">c.A::doGetData is  0 </span><br><span class="line">c.B::doGetData is  1 </span><br><span class="line">c.C::doGetData is  1 </span><br></pre></td></tr></table></figure>

<p>首先，记住先说下我的理解：<br>（1）<strong>调用的成员函数的时候，会首先去本类里面去寻找成员函数，如果没有找到则会向自己的父类寻找，去调用父类的成员函数。</strong><br>（2）<strong>当调用的成员函数前面有类的描述符的时候，则会去调用类描述符的那个类的成员函数。</strong><br>（3）<strong>当类成员种调用虚函数的时候，会调用派生类中虚函数的最后的实现</strong><br>上面的话理解不了没关系，我们一个一个来看<br>– <code>C c(10);</code> 派生类的构造函数，回去自动去调用父类的构造，这个没问题吧，调用顺序C-&gt;B-&gt;A。<br>所以现在A::m_data&#x3D;10;B::m_data&#x3D;2;C::m_data&#x3D;10;</p>
<ul>
<li><p><code>qDebug ()&lt;&lt;&quot;c.GetData is &quot;&lt;&lt;c.GetData ();</code>看下这个调用顺序，c中没有GetData,则会去找父类B的成员函数，父类中有这个函数，直接返回 所以是1.如果父类B中也没这个函数，那么会继续往上找，会找到A的GetData,A中的GetData 调用的是个虚函数，看上面的第一条，A会去找他派生类中的实现，所以最后还是会调用B中的实现，输出1.</p>
</li>
<li><p><code>qDebug ()&lt;&lt;&quot;c.A::GetData is &quot;&lt;&lt;c.A::GetData ();</code> 看第二个，函数前面有类的描述符A，则会去直接调用A的成员函数，然后A成员函数里面有个虚函数，那么他会找到派生类中最后的实现，所以调用的B中的实现，输出1，如果C中也有doGetData,那么则会调用的是C中的doGetData;</p>
</li>
<li><p><code>qDebug ()&lt;&lt;&quot;c.B::GetData is &quot;&lt;&lt;c.B::GetData ();</code>看第三个，函数前面有类的描述符，则会直接去找B的成员函数，返回1</p>
</li>
<li><p><code>qDebug ()&lt;&lt;&quot;c.C::GetData is &quot;&lt;&lt;c.C::GetData ();</code> 函数前面有类的描述符，会去找C里面的成员函数，因为C里面没有这个成员函数，则会向父类去找，返回B里面的值1.</p>
</li>
<li><p><code>qDebug ()&lt;&lt;&quot;c.doGetData is &quot;&lt;&lt;c.doGetData ();</code> 调用B里面的成员函数</p>
</li>
<li><p><code>qDebug ()&lt;&lt;&quot;c.A::doGetData is &quot;&lt;&lt;c.A::doGetData ();</code> 直接调用A的成员函数</p>
</li>
<li><p><code>qDebug ()&lt;&lt;&quot;c.B::doGetData is &quot;&lt;&lt;c.B::doGetData ();</code> 调用B</p>
</li>
<li><p><code>qDebug ()&lt;&lt;&quot;c.C::doGetData is &quot;&lt;&lt;c.C::doGetData ();</code> 调用B的</p>
</li>
</ul>
<p>这是一个很有意思的问题，在这里整理下，如果看完还是不太理解，可以去掉virtual修饰符，看看是怎么样的输出。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/09/03/%E5%8F%8C%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/09/03/%E5%8F%8C%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">双链表实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-09-03 17:15:00" itemprop="dateCreated datePublished" datetime="242024-09-03T17:15:00+08:00">242024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-03 17:16:10" itemprop="dateModified" datetime="2024-09-03T17:16:10+08:00">2024-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="双链表的实现"><a href="#双链表的实现" class="headerlink" title="双链表的实现"></a>双链表的实现</h3><p>需要注意的地方：<br>– 前插：在前插入的时候需要判断此时链表是否为空链表<br>– 后插：在后插的时候，需要判断传进来的的节点是不是尾节点<br>– 删除：删除的时候分情况处理，删除的如果是头部节点是一种情况，删除的如果是尾节点是一种情况，删除的是中间节点<br>– 更新链表指针的需要理清关系，一般是需要重新链接四个指针。</p>
<h3 id="具体代码"><a href="#具体代码" class="headerlink" title="具体代码"></a>具体代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">dlist.h</span><br><span class="line"></span><br><span class="line">#ifndef DLIST_H</span><br><span class="line">#define DLIST_H</span><br><span class="line"></span><br><span class="line">typedef struct DListElmt_</span><br><span class="line">&#123;</span><br><span class="line">    void* data;</span><br><span class="line">    struct DListElmt_ *prev;</span><br><span class="line">    struct DListElmt_ *next;</span><br><span class="line"></span><br><span class="line">&#125;DListElmt;</span><br><span class="line"></span><br><span class="line">typedef struct DList_</span><br><span class="line">&#123;</span><br><span class="line">    int size;</span><br><span class="line">    int (*match)(const void*key1,const void*key2);</span><br><span class="line">    void (*destory)(void *data);</span><br><span class="line">    DListElmt* head;</span><br><span class="line">    DListElmt* tail;</span><br><span class="line">&#125;DList;</span><br><span class="line"></span><br><span class="line">#define dlist_size(list)((list)-&gt;size)</span><br><span class="line">#define dlist_head(list)((list)-&gt;head)</span><br><span class="line">#define dlist_tail(list)((list)-&gt;tail)</span><br><span class="line">#define dlist_is_head(element)((element)-&gt;prev == NULL?1:0)</span><br><span class="line">#define dlist_is_tail(element)((element)-&gt;next == NULL?1:0)</span><br><span class="line">#define dlist_data(element)((element)-&gt;data)</span><br><span class="line">#define dlist_next(element)((element)-&gt;next)</span><br><span class="line">#define dlist_prev(element)((element)-&gt;prev)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class dlist</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    dlist();</span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    void dlist_init(DList*list,void(*destory)(void *data));</span><br><span class="line">    void destory(DList* list);</span><br><span class="line">    int dlist_ins_next(DList* list,DListElmt*element,const void*data);</span><br><span class="line">    int dlist_ins_prev(DList* list,DListElmt*element,const void*data);</span><br><span class="line">    int dlist_remove(DList* list,DListElmt*element,void **data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">#endif // DLIST_H</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">dlist.cpp</span><br><span class="line"></span><br><span class="line">#include &quot;dlist.h&quot;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;memory.h&gt;</span><br><span class="line">dlist::dlist()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void dlist::dlist_init(DList *list, void (*destory)(void *))</span><br><span class="line">&#123;</span><br><span class="line">    list-&gt;head = NULL;</span><br><span class="line">    list-&gt;size = 0;</span><br><span class="line">    list-&gt;tail = NULL;</span><br><span class="line">    list-&gt;destory=destory;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void dlist::destory(DList *list)</span><br><span class="line">&#123;</span><br><span class="line">    void *data;</span><br><span class="line"></span><br><span class="line">    while(dlist_size(list) &gt; 0)</span><br><span class="line">        &#123;</span><br><span class="line">        if(dlist_remove (list,dlist_tail(list),(void**)data) == 0 &amp;&amp; list-&gt;destory!=NULL)</span><br><span class="line">            &#123;</span><br><span class="line">            list-&gt;destory(data);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    memset (list,0,sizeof(DList));</span><br><span class="line">    return ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int dlist::dlist_ins_next(DList *list, DListElmt *element, const void *data)</span><br><span class="line">&#123;</span><br><span class="line">    DListElmt *newElmt = new DListElmt;</span><br><span class="line">    if(element == NULL &amp;&amp; dlist_size(list) != 0)</span><br><span class="line">        return -1;</span><br><span class="line">    newElmt-&gt;data = const_cast&lt;void*&gt;(data);</span><br><span class="line"></span><br><span class="line">    if(dlist_size(list) == 0)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        list-&gt;head = newElmt;</span><br><span class="line">        list-&gt;tail = newElmt;</span><br><span class="line">        newElmt-&gt;prev = NULL;</span><br><span class="line">        newElmt-&gt;next = NULL;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        newElmt-&gt;next = element-&gt;next;</span><br><span class="line">        //需要判断element 是不是尾</span><br><span class="line">        if(element-&gt;next = NULL)</span><br><span class="line">            list-&gt;tail= newElmt;</span><br><span class="line">        else</span><br><span class="line">            element-&gt;next-&gt;prev = newElmt;</span><br><span class="line">        newElmt-&gt;prev = element;</span><br><span class="line">        element-&gt;next = newElmt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    list-&gt;size++;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int dlist::dlist_ins_prev(DList *list, DListElmt *element, const void *data)</span><br><span class="line">&#123;</span><br><span class="line">    DListElmt *newElmt = new DListElmt;</span><br><span class="line">    if(element == NULL &amp;&amp; dlist_size(list) == 0)</span><br><span class="line">        return -1;</span><br><span class="line"></span><br><span class="line">    newElmt-&gt;data = (void*)data;</span><br><span class="line">    //如果插入的是一个空链表</span><br><span class="line">    if(dlist_size(list) == 0)</span><br><span class="line">    &#123;</span><br><span class="line">        list-&gt;head = newElmt;</span><br><span class="line">        list-&gt;head-&gt;prev = NULL;</span><br><span class="line">        list-&gt;head-&gt;next = NULL;</span><br><span class="line">        list-&gt;tail = newElmt;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        newElmt-&gt;next = element;</span><br><span class="line">        newElmt-&gt;prev = element-&gt;prev;</span><br><span class="line"></span><br><span class="line">        if(element-&gt;prev == NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            list-&gt;head = newElmt;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            element-&gt;prev-&gt;next=newElmt;</span><br><span class="line">        &#125;</span><br><span class="line">        element-&gt;prev = newElmt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    list-&gt;size++;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int dlist::dlist_remove(DList *list, DListElmt *element, void **data)</span><br><span class="line">&#123;</span><br><span class="line">    if(element == NULL || dlist_size(list)==0)</span><br><span class="line">        return -1;</span><br><span class="line"></span><br><span class="line">    *data = element-&gt;data;</span><br><span class="line">    if(element == list-&gt;head)</span><br><span class="line">    &#123;</span><br><span class="line">        list-&gt;head = element-&gt;next;</span><br><span class="line">        //删除的头节点</span><br><span class="line">        if(list-&gt;head == NULL)</span><br><span class="line">            list-&gt;tail=NULL;</span><br><span class="line">        else</span><br><span class="line">            element-&gt;next-&gt;prev= NULL;//将下一个节点设为头节点</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        //如果删除的节点是尾节点</span><br><span class="line">        if(element-&gt;next == NULL)</span><br><span class="line">            list-&gt;tail = element-&gt;prev;//更新尾节点</span><br><span class="line">        else</span><br><span class="line">            element-&gt;next-&gt;prev = element-&gt;prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    delete element;</span><br><span class="line">    list-&gt;size--;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/09/03/%E8%AE%B0%E4%B8%80Qt%E6%AC%A1%E7%BC%96%E8%AF%91Bug%EF%BC%9AERROR%20LINK2019%E6%97%A0%E6%B3%95%E8%A7%A3%E6%9E%90%E7%9A%84%E5%A4%96%E9%83%A8%E7%AC%A6%E5%8F%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/09/03/%E8%AE%B0%E4%B8%80Qt%E6%AC%A1%E7%BC%96%E8%AF%91Bug%EF%BC%9AERROR%20LINK2019%E6%97%A0%E6%B3%95%E8%A7%A3%E6%9E%90%E7%9A%84%E5%A4%96%E9%83%A8%E7%AC%A6%E5%8F%B7/" class="post-title-link" itemprop="url">记一Qt次编译Bug：ERROR LINK2019无法解析的外部符号</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-09-03 17:14:00" itemprop="dateCreated datePublished" datetime="242024-09-03T17:14:00+08:00">242024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-03 17:14:24" itemprop="dateModified" datetime="2024-09-03T17:14:24+08:00">2024-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>项目是从别人手里接手的，做的一个调试音频的软件，原先的项目是用VS+QT 插件在vs中编译的，因为我习惯使用qtCreator,所以想把城西移植到qtCreator上面来做，程序我在VS下编译过 ，是没问题可以运行的，所以我就重新根据项目的内容重写了pro文件，准备往qtCreator上面移植。</p>
<h2 id="产生的问题"><a href="#产生的问题" class="headerlink" title="产生的问题"></a>产生的问题</h2><p>编写完pro文件后，在qtCreator上面编译，一开始是各种链接错误，然后根据那些链接错误在pro文件里面把项目里面用到的Qt模块都加载上了<br><code>QT += xml core gui serialport network</code><br>再次重新编译的时候还是有三个链接错误。这次的链接错误不是某个模块没加载，因为我查了下代码，用到的模块我都加载上了，然后根据错误上网查找，基本上网上说的都试了，删除编译后的文件，重新qmake，是不是Q_OBJECT没写，某个槽函数只有声明没有实现，是不是某个库链接错误，基本能查的能试的全部试了一遍</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>最后实在没办法了，我电脑上装了个虚拟机，虚拟机里有个Qt的环境，我就想着换个环境编译下，把程序在虚拟机里面那个环境编译的时候，除了找不到windows头文件以后，居然编译成功了，没有任何链接错误。我就想是不是我windows上的qt环境有问题，当时用的是qt5.2.x的版本来着，然后重新下载了一个Qt5.3.2的版本。<br>安装好环境重新编译，编译成功。。。。。。。。。。。。。。。。</p>
<p>这里给大家一个参考，如果你在移植后有个怎么也解决 不了得链接错误，不妨换个编译环境试试。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/09/03/QToolButton%20%E4%BD%BF%E7%94%A8%E6%A0%B7%E5%BC%8F%E8%A1%A8%E5%8E%BB%E6%8E%89%E5%8F%B3%E8%BE%B9%E4%B8%8B%E8%A7%92%E7%AE%AD%E5%A4%B4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/09/03/QToolButton%20%E4%BD%BF%E7%94%A8%E6%A0%B7%E5%BC%8F%E8%A1%A8%E5%8E%BB%E6%8E%89%E5%8F%B3%E8%BE%B9%E4%B8%8B%E8%A7%92%E7%AE%AD%E5%A4%B4/" class="post-title-link" itemprop="url">QToolButton 使用样式表去掉右边下角箭头</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-09-03 17:10:00" itemprop="dateCreated datePublished" datetime="242024-09-03T17:10:00+08:00">242024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-03 17:11:05" itemprop="dateModified" datetime="2024-09-03T17:11:05+08:00">2024-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在使用QToolButton的时候，button的右下角会有一个三角形的小箭头，使用Qt样式表可以将这个小箭头给隐藏掉。样式表的设置如下:<br><code>QToolButton::menu-indicator &#123; image: None; &#125;</code><br>这样设置样式表，右下角的三角形箭头就会隐藏掉</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/09/03/Qt%20%E4%BA%8B%E4%BB%B6%E4%B8%AD%E7%9A%84%20installEventFilter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/09/03/Qt%20%E4%BA%8B%E4%BB%B6%E4%B8%AD%E7%9A%84%20installEventFilter/" class="post-title-link" itemprop="url">Qt 事件中的 installEventFilter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-09-03 17:06:00" itemprop="dateCreated datePublished" datetime="242024-09-03T17:06:00+08:00">242024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-03 17:07:19" itemprop="dateModified" datetime="2024-09-03T17:07:19+08:00">2024-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>有时候Qt某个控件的事件并不能满足我们的需求，那么就需要重写这个控件。我在项目中有个需求，当鼠标停留在QtableWidget上某个item的时候，要将这个item变化一种颜色。当鼠标离开的时候，将item复原。当鼠标指针在tableWidget的范围之内的时候，用 itemEntered(QTableWidgetItem *)信号就可以，但当鼠标离开tableWidget的时候，就需要自己用事件去处理了。可以重写tableWidget。但我只要判断一个事件，重写太麻烦了。这时候就需要Qt 事件过滤器了</p>
<h2 id="具体做法"><a href="#具体做法" class="headerlink" title="具体做法"></a>具体做法</h2><p>1 .调用installEventFilter()注册需要管理的对象<br>2 .在eventFilter()里处理需要管理的对象事件</p>
<p>我的例子是当鼠标离开tableWidget的去复原原先的样式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//matrixTableWidgt 为具体的控件，这里可以是button label之类的</span></span><br><span class="line">matrixTableWidgt-&gt;<span class="built_in">installEventFilter</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//实现 bool eventFilter(QObject *, QEvent *);函数</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matrixWidget::eventFilter</span><span class="params">(QObject *target, QEvent * event)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(target  == matrixTableWidgt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(event-&gt;<span class="built_in">type</span>() == QEvent::Leave)</span><br><span class="line">        &#123;</span><br><span class="line">            ....dosomething</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> QWidget::<span class="built_in">eventFilter</span>(target,event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/09/03/Qt%20%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/09/03/Qt%20%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Qt 信号和槽问题总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-09-03 16:53:00" itemprop="dateCreated datePublished" datetime="242024-09-03T16:53:00+08:00">242024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-03 16:58:58" itemprop="dateModified" datetime="2024-09-03T16:58:58+08:00">2024-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>应注意的问题信号与槽机制是比较灵活的，但有些局限性我们必须了解，这样在实际的使用过程中做到有的放矢，避免产生一些错误。下面就介绍一下这方面的情况</p>
<hr>
<h3 id="1-信号与槽的效率是非常高的，但是同真正的回调函数比较起来，由于增加了灵活性，因此在速度上还是有所损失，当然这种损失相对来说是比较小的，通过在一台-i586-133-的机器上测试是-10-微秒（运行-Linux），可见这种机制所提供的简洁性、灵活性还是值得的。但如果我们要追求高效率的话，比如在实时系统中就要尽可能的少用这种机制。"><a href="#1-信号与槽的效率是非常高的，但是同真正的回调函数比较起来，由于增加了灵活性，因此在速度上还是有所损失，当然这种损失相对来说是比较小的，通过在一台-i586-133-的机器上测试是-10-微秒（运行-Linux），可见这种机制所提供的简洁性、灵活性还是值得的。但如果我们要追求高效率的话，比如在实时系统中就要尽可能的少用这种机制。" class="headerlink" title="1 .信号与槽的效率是非常高的，但是同真正的回调函数比较起来，由于增加了灵活性，因此在速度上还是有所损失，当然这种损失相对来说是比较小的，通过在一台 i586-133 的机器上测试是 10 微秒（运行 Linux），可见这种机制所提供的简洁性、灵活性还是值得的。但如果我们要追求高效率的话，比如在实时系统中就要尽可能的少用这种机制。"></a>1 .信号与槽的效率是非常高的，但是同真正的回调函数比较起来，由于增加了灵活性，因此在速度上还是有所损失，当然这种损失相对来说是比较小的，通过在一台 i586-133 的机器上测试是 10 微秒（运行 Linux），可见这种机制所提供的简洁性、灵活性还是值得的。但如果我们要追求高效率的话，比如在实时系统中就要尽可能的少用这种机制。</h3><h3 id="2-信号与槽机制与普通函数的调用一样，如果使用不当的话，在程序执行时也有可能产生死循环。因此，在定义槽函数时一定要注意避免间接形成无限循环，即在槽中再次发射所接收到的同样信号。例如-在前面给出的例子中如果在-mySlot-槽函数中加上语句-emit-mySignal-即可形成死循环。"><a href="#2-信号与槽机制与普通函数的调用一样，如果使用不当的话，在程序执行时也有可能产生死循环。因此，在定义槽函数时一定要注意避免间接形成无限循环，即在槽中再次发射所接收到的同样信号。例如-在前面给出的例子中如果在-mySlot-槽函数中加上语句-emit-mySignal-即可形成死循环。" class="headerlink" title="2 .信号与槽机制与普通函数的调用一样，如果使用不当的话，在程序执行时也有可能产生死循环。因此，在定义槽函数时一定要注意避免间接形成无限循环，即在槽中再次发射所接收到的同样信号。例如 , 在前面给出的例子中如果在 mySlot() 槽函数中加上语句 emit mySignal() 即可形成死循环。"></a>2 .信号与槽机制与普通函数的调用一样，如果使用不当的话，在程序执行时也有可能产生死循环。因此，在定义槽函数时一定要注意避免间接形成无限循环，即在槽中再次发射所接收到的同样信号。例如 , 在前面给出的例子中如果在 mySlot() 槽函数中加上语句 emit mySignal() 即可形成死循环。</h3><h3 id="3-如果一个信号与多个槽相联系的话，那么，当这个信号被发射时，与之相关的槽被激活的顺序将是随机的。"><a href="#3-如果一个信号与多个槽相联系的话，那么，当这个信号被发射时，与之相关的槽被激活的顺序将是随机的。" class="headerlink" title="3 .如果一个信号与多个槽相联系的话，那么，当这个信号被发射时，与之相关的槽被激活的顺序将是随机的。"></a>3 .如果一个信号与多个槽相联系的话，那么，当这个信号被发射时，与之相关的槽被激活的顺序将是随机的。</h3><h3 id="4-宏定义不能用在-signal-和-slot-的参数中。既然-moc-工具不扩展-define，因此，在-signals-和-slots-中携带参数的宏就不能正确地工作，如果不带参数是可以的。例如，下面的例子中将带有参数的宏-SIGNEDNESS-a-作为信号的参数是不合语法的："><a href="#4-宏定义不能用在-signal-和-slot-的参数中。既然-moc-工具不扩展-define，因此，在-signals-和-slots-中携带参数的宏就不能正确地工作，如果不带参数是可以的。例如，下面的例子中将带有参数的宏-SIGNEDNESS-a-作为信号的参数是不合语法的：" class="headerlink" title="4 .宏定义不能用在 signal 和 slot 的参数中。既然 moc 工具不扩展 #define，因此，在 signals 和 slots 中携带参数的宏就不能正确地工作，如果不带参数是可以的。例如，下面的例子中将带有参数的宏 SIGNEDNESS(a) 作为信号的参数是不合语法的："></a>4 .宏定义不能用在 signal 和 slot 的参数中。既然 moc 工具不扩展 <code>#define</code>，因此，在 signals 和 slots 中携带参数的宏就不能正确地工作，如果不带参数是可以的。例如，下面的例子中将带有参数的宏 SIGNEDNESS(a) 作为信号的参数是不合语法的：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifdef</span> ultrix</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SIGNEDNESS(a) unsigned a</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SIGNEDNESS(a) a</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Whatever</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">[...]</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">someSignal</span><span class="params">( SIGNEDNESS(a) )</span></span>;</span><br><span class="line">[...]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="5-构造函数不能用在-signals-或者-slots-声明区域内。的确，将一个构造函数放在-signals-或者-slots-区内有点不可理解，无论如何，不能将它们放在-private-slots、protected-slots-或者-public-slots-区内。下面的用法是不合语法要求的："><a href="#5-构造函数不能用在-signals-或者-slots-声明区域内。的确，将一个构造函数放在-signals-或者-slots-区内有点不可理解，无论如何，不能将它们放在-private-slots、protected-slots-或者-public-slots-区内。下面的用法是不合语法要求的：" class="headerlink" title="5 .构造函数不能用在 signals 或者 slots 声明区域内。的确，将一个构造函数放在 signals 或者 slots 区内有点不可理解，无论如何，不能将它们放在 private slots、protected slots 或者 public slots 区内。下面的用法是不合语法要求的："></a>5 .构造函数不能用在 signals 或者 slots 声明区域内。的确，将一个构造函数放在 signals 或者 slots 区内有点不可理解，无论如何，不能将它们放在 private slots、protected slots 或者 public slots 区内。下面的用法是不合语法要求的：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">class</span> <span class="title class_">SomeClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="built_in">SomeClass</span>( QObject *parent, <span class="type">const</span> <span class="type">char</span> *name )</span><br><span class="line">        : <span class="built_in">QObject</span>( parent, name ) &#123;&#125;  <span class="comment">// 在槽声明区内声明构造函数不合语法</span></span><br><span class="line">[...]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="6-函数指针不能作为信号或槽的参数。例如，下面的例子中将-void-applyFunction-QList-void-作为参数是不合语法的："><a href="#6-函数指针不能作为信号或槽的参数。例如，下面的例子中将-void-applyFunction-QList-void-作为参数是不合语法的：" class="headerlink" title="6 .函数指针不能作为信号或槽的参数。例如，下面的例子中将 void (applyFunction)(QList, void*) 作为参数是不合语法的："></a>6 .函数指针不能作为信号或槽的参数。例如，下面的例子中将 void (<em>applyFunction)(QList</em>, void*) 作为参数是不合语法的：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">someClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">[...]</span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">apply</span><span class="params">(<span class="type">void</span> (*applyFunction)(QList*, <span class="type">void</span>*), <span class="type">char</span>*)</span></span>; <span class="comment">// 不合语法</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>你可以采用下面的方法绕过这个限制：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*ApplyFunctionType)</span><span class="params">(QList*, <span class="type">void</span>*)</span></span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">someClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">[...]</span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">apply</span><span class="params">( ApplyFunctionType, <span class="type">char</span> *)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="7-信号与槽不能有缺省参数。既然-signal-slot-绑定是发生在运行时刻，那么，从概念上讲使用缺省参数是困难的。下面的用法是不合理的："><a href="#7-信号与槽不能有缺省参数。既然-signal-slot-绑定是发生在运行时刻，那么，从概念上讲使用缺省参数是困难的。下面的用法是不合理的：" class="headerlink" title="7 .信号与槽不能有缺省参数。既然 signal-&gt;slot 绑定是发生在运行时刻，那么，从概念上讲使用缺省参数是困难的。下面的用法是不合理的："></a>7 .信号与槽不能有缺省参数。既然 signal-&gt;slot 绑定是发生在运行时刻，那么，从概念上讲使用缺省参数是困难的。下面的用法是不合理的：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">someSlot</span><span class="params">(<span class="type">int</span> x=<span class="number">100</span>)</span></span>; <span class="comment">// 将 x 的缺省值定义成 100，在槽函数声明中使用是错误的</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="8-信号与槽也不能携带模板类参数。如果将信号、槽声明为模板类参数的话，即使-moc-工具不报告错误，也不可能得到预期的结果。例如，下面的例子中当信号发射时，槽函数不会被正确调用："><a href="#8-信号与槽也不能携带模板类参数。如果将信号、槽声明为模板类参数的话，即使-moc-工具不报告错误，也不可能得到预期的结果。例如，下面的例子中当信号发射时，槽函数不会被正确调用：" class="headerlink" title="8 .信号与槽也不能携带模板类参数。如果将信号、槽声明为模板类参数的话，即使 moc 工具不报告错误，也不可能得到预期的结果。例如，下面的例子中当信号发射时，槽函数不会被正确调用："></a>8 .信号与槽也不能携带模板类参数。如果将信号、槽声明为模板类参数的话，即使 moc 工具不报告错误，也不可能得到预期的结果。例如，下面的例子中当信号发射时，槽函数不会被正确调用：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[...]</span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">MyWidget::setLocation</span> <span class="params">(pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; location)</span></span>;</span><br><span class="line">[...]</span><br><span class="line"><span class="keyword">public</span> signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">MyObject::moved</span> <span class="params">(pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; location)</span></span>;</span><br></pre></td></tr></table></figure>

<p>但是，你可以使用 typedef 语句来绕过这个限制。如下所示：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; IntPair;</span><br><span class="line">[...]</span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">MyWidget::setLocation</span> <span class="params">(IntPair location)</span></span>;</span><br><span class="line">[...]</span><br><span class="line"><span class="keyword">public</span> signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">MyObject::moved</span> <span class="params">(IntPair location)</span></span>;</span><br></pre></td></tr></table></figure>

<p>这样使用的话，你就可以得到正确的结果。  </p>
<h3 id="9-嵌套的类不能位于信号或槽区域内，也不能有信号或者槽。例如，下面的例子中，在-class-B-中声明槽-b-是不合语法的，在信号区内声明槽-b-也是不合语法的。"><a href="#9-嵌套的类不能位于信号或槽区域内，也不能有信号或者槽。例如，下面的例子中，在-class-B-中声明槽-b-是不合语法的，在信号区内声明槽-b-也是不合语法的。" class="headerlink" title="9 .嵌套的类不能位于信号或槽区域内，也不能有信号或者槽。例如，下面的例子中，在 class B 中声明槽 b() 是不合语法的，在信号区内声明槽 b() 也是不合语法的。"></a>9 .嵌套的类不能位于信号或槽区域内，也不能有信号或者槽。例如，下面的例子中，在 class B 中声明槽 b() 是不合语法的，在信号区内声明槽 b() 也是不合语法的。</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">B</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> slots:   <span class="comment">// 在嵌套类中声明槽不合语法</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">b</span><span class="params">()</span></span>;</span><br><span class="line">    [....]</span><br><span class="line">  &#125;;</span><br><span class="line">signals:</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">B</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 在信号区内声明嵌套类不合语法</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">b</span><span class="params">()</span></span>;</span><br><span class="line">    [....]</span><br><span class="line">    &#125;:</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="10-友元声明不能位于信号或者槽声明区内。相反，它们应该在普通-C-的-private、protected-或者-public-区内进行声明。下面的例子是不合语法规范的："><a href="#10-友元声明不能位于信号或者槽声明区内。相反，它们应该在普通-C-的-private、protected-或者-public-区内进行声明。下面的例子是不合语法规范的：" class="headerlink" title="10 .友元声明不能位于信号或者槽声明区内。相反，它们应该在普通 C++ 的 private、protected 或者 public 区内进行声明。下面的例子是不合语法规范的："></a>10 .友元声明不能位于信号或者槽声明区内。相反，它们应该在普通 C++ 的 private、protected 或者 public 区内进行声明。下面的例子是不合语法规范的：</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">someClass</span> : <span class="keyword">public</span> QObject</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">[...]</span><br><span class="line">signals: <span class="comment">// 信号定义区</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">ClassTemplate</span>; <span class="comment">// 此处定义不合语法</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.isroots.com/242024/09/03/%E5%9C%A8github%20%E6%90%AD%E5%BB%BA%E5%85%8D%E8%B4%B9%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E5%92%8C%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E5%85%B3%E8%81%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="吴晓宁">
      <meta itemprop="description" content="记录一些自己的见闻">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吴晓宁blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/242024/09/03/%E5%9C%A8github%20%E6%90%AD%E5%BB%BA%E5%85%8D%E8%B4%B9%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E5%92%8C%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E5%85%B3%E8%81%94/" class="post-title-link" itemprop="url">在github 搭建免费私有仓库和本地仓库关联</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：242024-09-03 16:28:00" itemprop="dateCreated datePublished" datetime="242024-09-03T16:28:00+08:00">242024-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-03 16:29:28" itemprop="dateModified" datetime="2024-09-03T16:29:28+08:00">2024-09-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Github被微软收购后，今年重大的更新就是个人开发者可以免费的创建私人仓库并且无限制。但是个人仓库最多可以邀请三个人协和开发。这个对于小型项目来说应该足够了。我准备将自己学习时使用的代码上传到GITHUB。方便自己在任何地方都可以随时查阅。</p>
<h2 id="1-创建远程仓库"><a href="#1-创建远程仓库" class="headerlink" title="1.创建远程仓库"></a>1.创建远程仓库</h2><p>首先在github 上创建个人的私人仓库,登陆github，点击右上方“+”号，选择“New repository”，输入仓库名，在Repository name 中输入你想创建的仓库名称就行，然后选择私有仓库，点击创建即可。<br><img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif"></p>
<p>下图是我创建好的仓库<br><img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif"><br>可以看到在我的仓库名称那可以看到private</p>
<h2 id="2-创建本地仓库"><a href="#2-创建本地仓库" class="headerlink" title="2 .创建本地仓库"></a>2 .创建本地仓库</h2><p>因为我是在windows上操作的。这里只记录在windows上的操作。linux和mac系统的都是类似的步骤。<br>– 2.1 下载github的客户端，然后安装。我都是默认安装的<br>– 2.2 安装完成后，在开始菜单-&gt;所有程序，就会找到git Bash<br>打开git Bash,蹦出一个类似cmd窗口的东西，就说明git安装成功<br><img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif"><br>安装完成后，要告诉git你的用户名和邮箱，输入以下命令<br><code>git config --global user.name &quot;your name&quot;</code><br><code>git config --global user.email &quot;your@email.com&quot;</code><br>这里的 “”里面的要换成你自己的名字和email<br>– 2.3 安装 Git 之后，就可以在我们自己的电脑上来创建本地仓库了。仓库（Repository）可以简单理解为一个目录，每个目录包含着一个仓库。首先，我们可以在自己电脑的任意位置新建一个文件夹（例如 E: Git&#x2F; 目录），该目录作为 Git 的管理目录，所有的仓库都将建立在此目录下。在此目录下，我们要建立一个仓库，名为 learngit。打开 Git Bash，cd 到 Git&#x2F; 目录下，新建一个目录 learngit，再 cd 到 learngit 目录，命令如下：<br><code>mkdir learngit</code><br><code>cd learngit</code><br>然后，使用下面的命令将 learngit 目录变成 Git 可以管理的仓库：<br><code>git init</code><br>运行该命令之后，就可以在 learngit 目录下生成一个 .git 隐藏文件夹，表示初始化成功，该目录已经可以被 Git 管理了。现在 learngit 就称为我们的git仓库了。<br>现在，我们已经创建了一个空的仓库 learngit，下一步往仓库里加点内容。例如在该仓库目录下新建一个 readme.md 文件。将该文件添加到仓库中需要两个步骤：<br>– 2.3.1.用命令 git add 告诉git。把文件添加到仓库:<br><code>git add readme.md</code><br>– 2.3.2.用命令 git commit 告诉git，把文件提交到仓库<br><code>git commit -m &quot;create readme file&quot;</code><br>其中 -m 后面是本次提交的说明，最好说明是有意义的，这样你就能从历史记录里面方便找到你更改的历史。</p>
<h1 id="3-将本地仓库关联到远程仓库"><a href="#3-将本地仓库关联到远程仓库" class="headerlink" title="3.将本地仓库关联到远程仓库"></a>3.将本地仓库关联到远程仓库</h1><p>这时候，你的本地 Git 仓库与 GitHub 远程仓库还没有办法传输的，由于使用的是 SSH 加密，需要进行以下设置。<br>– 3.1 创建SSH Key,在用户主目录下面，看看有没有.ssh。如果有，再看看这个目录下有没有 id_rsa 和 id_rsa.pub 这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开终端（Windows 下打开 Git Bash），创建 SSH Key<br><code>ssh-keygen -t rsa -C &quot;youremail@mail.com&quot;</code> 一直回车就OK<br>这里记录下，这个会在你主用户目录下创建一个.ssh 的隐藏目录。比如我的电脑用户名是DIY-PC，那么这个隐藏目录就在C:\Users\DIY\ 下面，记得看你上面的目录是在哪个目录执行的。记得打开显示隐藏目录。然后就找到了。<br>– 3.2 登录自己的 GitHub，点击页面右上角 Settings 选项。<br><img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif"><br>点击SSH and GPG keys:<br><img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif"><br>点击 New SSH key 后，输入 Title 和 Key。重点来了，Key 就是你电脑的 id_rsa.pub 里的内容，直接复制过来就好<br><img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif"><br>点击 Add SSH key，就完成了 SSH 的配置。之所以要设置 SSH key，是为了识别出你推送的确实是你推送的，而不是别人冒充的，而 Git 支持 SSH 协议，所以，GitHub 只要知道了你的公钥，就可以确认只有你自己才能推送。如果你有两个电脑，比如公司一个，家里一个。那么可以把两台电脑的公钥都添加到你的 GitHub，这样就都可以实现推送了。</p>
<h1 id="4-将本地上传的GitHub"><a href="#4-将本地上传的GitHub" class="headerlink" title="4.将本地上传的GitHub"></a>4.将本地上传的GitHub</h1><ul>
<li><p>4.1 其实，本地 Git 仓库与 GitHub 的互连有两种形式，我们首先介绍第一种方式：从本地上传到 GitHub。<br>  刚才我们已经在github创建了一个私人仓库，点开我们的仓库，点击Clone or Download 复制下git的地址，如下图：<br>  <img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif"></p>
<ul>
<li>4.2 回到我们的 Git Bash 界面，把本地 Git 库与刚刚建的远程仓库关联，输入下列命令<br>  <code>git remote add origin https://github.com/yourname/learngit.git</code><br>  origin 是你刚才复制的地址，这条命令是添加一个远程仓库</li>
<li>4.3下一步就是把本地仓库的所有文件（刚刚新建的 readme.md）上传到 GitHub 上。运行以下命令：<br>  <code>git push -u origin master</code><br>  运行命令之后，出现如下提示:<br>  <img src="http://isroot.cn/wp-content/plugins/a3-lazy-load/assets/images/lazy_placeholder.gif"><br>  这里要输入yes 不能直接回车的<br>  然后在push 你可能会遇到push 不上去的错误，这是因为我们远程仓库和本地仓库不一致的原因，解决办法这里贴个博客，自己看<a target="_blank" rel="noopener" href="https://gitbook.tw/chapters/github/fail-to-push.html">https://gitbook.tw/chapters/github/fail-to-push.html</a>。<br>  先将远程仓库和本地合并，如果你在合并的时候出现“fatal: refusing to merge unrelated histories”。这里的解决办法是<a target="_blank" rel="noopener" href="http://isroot.cn/work/jiejuegitzhongfatalrefusingtomergeunrelatedhistories/">http://isroot.cn/work/jiejuegitzhongfatalrefusingtomergeunrelatedhistories/</a><br>  然后就可以push 了，执行 <code>git push -u origin master</code><br>  将我们本地的文件就可以推到自己的仓库里面了。推完后我的github仓库已经出现了本地的代码。</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">吴晓宁</p>
  <div class="site-description" itemprop="description">记录一些自己的见闻</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">89</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">吴晓宁</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
